import React, {useEffect, useState} from "react";import "./Login.css";import AppBar from "../AppBar/AppBar";import {Link, useHistory} from "react-router-dom";import SocialSignInButton from "../SoicalSignInButton/SocialSignInButton";import {auth} from "../../firebase";import {useStateValue} from "../../StateProvider";function Login({login}) {    const history = useHistory()    //eslint-disable-next-line    const [{user},dispatch] = useStateValue()    const [passwordVisibility,setVisibility] = useState(false)    const [password,setPassword] = useState('')    const [email,setEmail] = useState('')    const loginOrSignup = login?'Login':'Sign Up'    useEffect( ()=>{            auth.onAuthStateChanged(authUser=>{                console.log('THE USER IS >>>',authUser)                if (authUser){                    history.replace('/dashboard')                    dispatch({                        type:"SET_USER",                        user: authUser                    })                }else {                    dispatch({                        type:"SET_USER",                        user:null                    })                }            })        //eslint-disable-next-line    },[])    const togglePassword = ()=>{        if (passwordVisibility){            setVisibility(false)        }else {            setVisibility(true)        }    }    const logIn = e=>{        e.preventDefault()        auth            .signInWithEmailAndPassword(email, password)            .then(auth => {                history.push('/')            })            .catch(err =>{                alert(err.message)            })    }    const register = e=>{        e.preventDefault()        auth.createUserWithEmailAndPassword(email,password)            .then(auth =>{                console.log("This is uid",auth.user.uid)                fetch('http://localhost:3000/new/user', {                    method: 'post',                    headers: {'Content-Type': 'application/json'},                    body: JSON.stringify({                        userID: auth.user.uid,                        userInfo: auth.user                    })                })                    .then(response => response.json())                    .then(data => console.log(data))                    .catch(err => console.log(err))                history.push('/')            })            .catch(err => alert(err.message))    }    return(        <div className="login">            <div className="appbar-login">                <AppBar login={true}/>                <hr className="login-hr"/>            </div>                        <div className="appbar-main">                <h2>{loginOrSignup} and start sharing</h2>                {login? <p>Don't have an account? <Link to={'/register'}>Sign Up</Link></p>: <p>Have an account? <Link to={'/login'}>Sign In</Link></p>}                <h5 className='fa-ap'>{loginOrSignup} with:</h5>                <div className="login-buttons">                   <SocialSignInButton companyClass={'fa-google'} companyName={'Google'}/>                   <SocialSignInButton companyClass={'fa-twitter'} companyName={'Twitter'}/>                   <SocialSignInButton  companyName={'Facebook'} companyClass={'fa-facebook'}/>                    <SocialSignInButton  companyName={'Apple'} companyClass={'fa-apple'}/>                </div>                <div className="input-fields">                    <label  htmlFor="#login-email" className="input-label">Email address</label>                    <input value={email} onChange={e => setEmail(e.target.value)} className="login-field" type="email" placeholder="Email" id="login-email"/>                    <label htmlFor="#login-password" className="input-label">                        Password                        <span onClick={togglePassword} className="show-password">                            <img className="eye" src="https://dl6fh5ptkejqa.cloudfront.net/2b21cdf7bb0327252f60662d1fdfbc32.svg" alt=""/>                            {passwordVisibility? 'Hide':'Show'}                        </span>                    </label>                    <input value={password} onChange={e => setPassword(e.target.value)} className="login-field" type={passwordVisibility? 'text':'password'} placeholder="Password" id="login-password" />                    <button onClick={login? logIn : register} className="btn btn-primary login-button">{loginOrSignup}</button>                </div>            </div>        </div>    )}export default Login